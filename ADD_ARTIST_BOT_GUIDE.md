# Adding Artist Bot Accounts - Quick Guide

## Using the Helper Script

The `add-artist-bot` script makes it easy to add new artist accounts:

### Basic Usage

```bash
npm run add-artist-bot -- \
  --artist "Rembrandt van Rijn" \
  --token "your_access_token_here" \
  --username "@CuratedRembrandt@mastodon.social"
```

### With Scheduling SQL Generation

```bash
npm run add-artist-bot -- \
  --artist "Rembrandt van Rijn" \
  --token "your_access_token_here" \
  --username "@CuratedRembrandt@mastodon.social" \
  --schedule
```

The `--schedule` flag will generate the SQL you need to copy/paste into Supabase SQL Editor.

### Full Example

```bash
npm run add-artist-bot -- \
  --artist "Caravaggio" \
  --token "abc123xyz..." \
  --base-url "https://mastodon.social" \
  --username "@CuratedCaravaggio@mastodon.social" \
  --schedule
```

## What the Script Does

1. ✅ **Verifies artist exists** in database
2. ✅ **Checks for existing account** (updates if found)
3. ✅ **Saves account to database** (`mastodon_accounts` table)
4. ✅ **Tests the function** (makes sure it works)
5. ✅ **Generates scheduling SQL** (if `--schedule` flag used)

## Manual Alternative

If you prefer to do it manually:

1. **Get the access token** from Mastodon Settings → Development
2. **Run SQL:**
   ```sql
   INSERT INTO mastodon_accounts (artist_id, mastodon_base_url, mastodon_access_token, account_username)
   SELECT 
     id,
     'https://mastodon.social',
     'your_token_here',
     '@username@mastodon.social'
   FROM artists
   WHERE name = 'Artist Name'
   ON CONFLICT (artist_id) DO UPDATE
   SET 
     mastodon_base_url = EXCLUDED.mastodon_base_url,
     mastodon_access_token = EXCLUDED.mastodon_access_token,
     account_username = EXCLUDED.account_username,
     updated_at = NOW();
   ```

## After Adding Account

1. **Test it:**
   ```bash
   curl -X POST \
     "https://lxtkpwsxupzkxuhhmvvz.supabase.co/functions/v1/post-art?artist=Artist%20Name" \
     -H "Authorization: Bearer YOUR_ANON_KEY"
   ```

2. **Set up scheduling:**
   - Use the SQL generated by `--schedule` flag
   - Or copy pattern from `setup-multi-artist-schedule.sql`
   - Replace `YOUR_ANON_KEY` with your actual anon key
   - Run in Supabase SQL Editor

## Tips

- **Artist name must match exactly** - Check your `artists` table for the exact spelling
- **Test before scheduling** - Make sure the account works first
- **Use consistent naming** - `@CuratedArtistName` pattern makes it easy to find accounts
- **Keep tokens secure** - Never commit tokens to git

